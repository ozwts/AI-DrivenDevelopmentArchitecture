# インタラクション効率

## 核心原則

**ユーザーの操作を最小化し、目的達成を最短化する。**

根拠となる憲法:
- `user-first-principles.md`: 「利便性とは、認知負荷を最小化し、目的達成を最短化すること」「無駄な操作をさせない」

## 実施すること

1. **操作ステップの最小化**: キー操作を最小クリック数で完了
2. **スマートデフォルト**: 合理的なデフォルト値で選択負荷を軽減
3. **プログレッシブディスクロージャー**: 必要な情報を必要なときに段階的に開示
4. **認識による操作**: 記憶に頼らず、選択肢を視覚的に提示
5. **コンテキスト保持**: 前回の選択や入力を記憶し再利用

## 実施しないこと

1. **不要な確認ダイアログ** → 取り消し可能なら確認不要
2. **冗長なステップ** → 必須でないステップは省略
3. **毎回の再入力** → 直前の値を保持
4. **全情報の一括表示** → 段階的に開示

---

## スマートデフォルト

**ユーザーが最も選択する可能性が高い値を事前に設定する。**

| 場面 | スマートデフォルト例 |
|------|---------------------|
| 日付選択 | 今日の日付 |
| 期限 | 1週間後 |
| 通知設定 | 一般的な推奨設定をON |
| 品質設定 | ネットワーク状況に応じて自動選択 |

### Do / Don't

**Good**: フォームにユーザーのプロフィールから取得できる情報を自動入力

```tsx
<Input defaultValue={user.email} />
```

**Bad**: 毎回空のフォームを表示し、すべて手入力させる

```tsx
<Input defaultValue="" />
```

---

## プログレッシブディスクロージャー

**情報を段階的に開示し、認知負荷を軽減する。**

### 適用パターン

| パターン | 用途 | 実装例 |
|----------|------|--------|
| アコーディオン | 詳細情報の展開 | FAQ、設定の詳細 |
| モーダル | フォーカスした操作 | 確認、編集 |
| ツールチップ | 補足情報 | ヘルプ、説明 |
| ステッパー | 複雑なフロー | ウィザード形式 |
| 「もっと見る」 | 追加コンテンツ | リスト、履歴 |

### Do / Don't

**Good**: 基本オプションを表示し、「詳細設定」で高度な機能を開示

```tsx
<Settings>
  <BasicOptions />
  <Accordion title="詳細設定">
    <AdvancedOptions />
  </Accordion>
</Settings>
```

**Bad**: すべてのオプションを一度に表示し、ユーザーを圧倒する

---

## 操作ステップの最小化

**目的達成までのクリック数・入力数を最小にする。**

### テクニック

| テクニック | 効果 |
|------------|------|
| インライン編集 | 編集画面への遷移を省略 |
| ワンクリック操作 | 確認なしで即実行（取り消し可能な場合） |
| バッチ操作 | 複数項目を一括処理 |
| キーボードショートカット | マウス操作を省略 |
| オートコンプリート | 入力量を削減 |

### Do / Don't

**Good**: 削除後に「元に戻す」を提供（確認ダイアログなし）

```tsx
const handleDelete = () => {
  deleteItem(id);
  toast({
    message: "削除しました",
    action: { label: "元に戻す", onClick: undoDelete }
  });
};
```

**Bad**: 毎回「本当に削除しますか？」と確認（取り消し可能なのに）

---

## 認識による操作（Recognition over Recall）

**ユーザーに記憶を強いず、選択肢を視覚的に提示する。**

### Do / Don't

**Good**: 最近使用した項目を表示

```tsx
<RecentItems items={recentlyUsed} />
<SearchInput placeholder="検索..." />
```

**Bad**: 項目IDを記憶して手入力させる

**Good**: アイコン＋ラベルで機能を明示

```tsx
<Button icon={<TrashIcon />}>削除</Button>
```

**Bad**: アイコンのみ（意味を記憶する必要あり）

---

## コンテキスト保持

**ユーザーの前回の選択・状態を記憶し、継続性を提供する。**

| 保持対象 | 方法 |
|----------|------|
| フォーム入力 | LocalStorage / SessionStorage |
| フィルター設定 | URLパラメータ / State |
| 表示設定 | ユーザー設定 |
| 作業中断 | 自動保存 |

### Do / Don't

**Good**: フィルター設定をURLに反映し、共有・ブックマーク可能に

```
/todos?status=active&sort=dueDate
```

**Bad**: ページ遷移でフィルターがリセットされる

---

## フリクションの適切な使用

**すべてのフリクションが悪いわけではない。** 破壊的な操作には意図的なフリクションを設ける。

| 操作の性質 | フリクション | 例 |
|------------|-------------|-----|
| 取り消し可能 | 不要 | 項目の削除（Undo可能） |
| 取り消し不可・影響小 | 軽微 | 設定変更 |
| 取り消し不可・影響大 | 必要 | アカウント削除、データエクスポート |

### 破壊的操作のフリクションパターン

```tsx
// アカウント削除: 意図的なフリクション
<Dialog>
  <p>この操作は取り消せません。</p>
  <p>確認のため「削除」と入力してください:</p>
  <Input
    placeholder="削除"
    onChange={(e) => setCanDelete(e.target.value === "削除")}
  />
  <Button disabled={!canDelete} variant="danger">
    アカウントを削除
  </Button>
</Dialog>
```

---

## 関連ドキュメント

- `10-design-overview.md`: デザイン4原則
- `../component/30-form-overview.md`: フォーム設計
- `../../constitution/user-first/user-first-principles.md`: ユーザー第一の原則
