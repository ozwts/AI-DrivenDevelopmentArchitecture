# 追跡可能性の原則

## 最高原則

**AIと人間がシステムを理解できる状態を維持する。** ロジックを明示的なコードに留め、静的解析と動的追跡で変更の影響範囲を追跡可能にする。

---

## 理解可能性の本質

**コードは書かれる回数より読まれる回数の方が多い。**

- AIがコードベースを読み解き、自律的に変更・拡張できる
- 人間がレビュー・デバッグ・保守できる
- 設計判断の意図が明文化されている

---

## 明示性

**ビジネスロジックはアプリケーションコードに留める。**

フレームワークの規約、クラウドサービスの設定、インフラの構成に埋没させない。埋没したロジックは追跡できず、変更もできない。

---

## 静的追跡（解析可能性）

**型システムで表現可能なことは型で表現する。**

### 解析可能性のレベル

| レベル | 手段 | 検出能力 |
|--------|------|----------|
| 3（最高） | 型システム | コンパイルエラーで100%検出 |
| 2（中） | Linter・カスタムルール | 自動検出 |
| 1（低） | ドキュメント | 人間・AIレビュー |
| 0（不可） | 暗黙的な知識 | 検出不可能（避けるべき） |

### 原則

- エラーを型で明示し、ハンドリング漏れを防止
- 不変性を型で保証し、変更箇所を限定
- 暗黙的な依存を排除し、依存を引数で明示

---

## 動的追跡（可観測性）

**システムの実行時の動作・状態変化を記録する。**

### 原則

- 構造化ログで動作・状態変化を記録
- AIが実行履歴から異常検知・診断・修正案提示を実現
- 必要十分な情報を記録し、ノイズを避ける

---

## MECE原則の適用

**静的解析と動的追跡を重複なく使い分ける。**

- 型システムで検証可能なことをログに頼らない
- 静的解析でカバーできないことを動的追跡で補完
