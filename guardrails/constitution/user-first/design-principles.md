# デザイン原則

## 最高原則

ビジュアルデザインは**構造による意図の表明**でなければならない。整列・近接・対比・反復の4原則を通じて、視覚的な秩序を作り、ユーザーが迷わず目的を達成できるインターフェースを実現する。

## 理念

### デザインの本質

デザインとは、**整列**により一貫した基準線を作り、**近接**により関連性を視覚化し、**対比**により重要度を明示し、**反復**により予測可能性を担保することである。

これはアーキテクチャ原則と同根である：

- コードの「レイヤー分離」= UIの「整列」（一貫した基準線）
- コードの「機能的凝集」= UIの「近接」（関連要素のグルーピング）
- コードの「境界による分離」= UIの「対比」（差異の明確化）
- コードの「一貫したパターン」= UIの「反復」（予測可能な構造）

### 得られるベネフィット

**ユーザーの認知負荷軽減**:

- 視覚的階層により、どこを見るべきか迷わない
- 一貫したパターンにより、学習コストが最小化される
- 関連情報のグルーピングにより、情報の関係性が即座に理解できる

**AIによるUI生成の品質向上**:

- デザイントークンという制約により、AIが一貫したUIを生成できる
- 原則という基準により、AIが設計意図を推論できる
- 構造化されたルールにより、主観的判断を排除できる

**長期的な保守性**:

- デザイントークンの変更が全体に波及し、ブランド変更が容易
- 原則に基づくレビューにより、デザインの一貫性を維持
- コンポーネントの再利用により、UIの品質が均一化

## 核心原則

### 原則1: 整列（Alignment）

**すべての要素は見えない基準線に沿って配置する。**

整列は視覚的な秩序を生み出す最も強力な手段である。要素が整列していると、プロフェッショナルで信頼感のある印象を与える。

**実践**:

- グリッドシステムに基づく配置
- テキストの左揃え・右揃え・中央揃えの意図的な選択
- 余白（spacing）の一貫した適用

**アンチパターン**:

- 要素ごとに異なる基準線
- 「だいたい揃っている」状態（微妙なズレが不安定感を生む）

### 原則2: 近接（Proximity）

**関連する要素は近くに、無関係な要素は離して配置する。**

近接は情報のグルーピングを視覚化する。物理的な距離が意味的な関連性を表現する。

**実践**:

- 関連するフォームフィールドをグループ化
- セクション間に十分な余白を確保
- ラベルと対応するコントロールの近接配置

**アンチパターン**:

- 均等な余白（すべてが等距離 = 関連性が不明）
- 関連要素の分離配置

### 原則3: 対比（Contrast）

**重要度の差は、視覚的な差として明確に表現する。**

対比は階層を作り、ユーザーの視線を誘導する。弱い対比は曖昧さを生み、ユーザーを迷わせる。

**実践**:

- プライマリアクションとセカンダリアクションの明確な差別化
- 見出しと本文の明確なサイズ・ウェイト差
- 背景色とテキスト色の十分なコントラスト比（アクセシビリティ）

**アンチパターン**:

- 「少しだけ違う」（中途半端な対比は混乱を招く）
- すべてが同じ重要度に見える

### 原則4: 反復（Repetition）

**同じ意味を持つ要素には、同じスタイルを適用する。**

反復は一貫性を生み、ユーザーが学習したパターンを再利用できるようにする。

**実践**:

- ボタン、入力、カードなどのUIプリミティブの統一
- 色・フォント・余白のデザイントークン化
- 同じ種類のアクションには同じスタイル

**アンチパターン**:

- 同じ機能に異なるスタイル
- デザイントークンを無視した個別スタイリング

## デザイントークンによる原則の実装

デザイントークンは、4原則を**コードレベルで強制する仕組み**である。

| 原則 | トークン化の対象  | 効果                         |
| ---- | ----------------- | ---------------------------- |
| 整列 | Spacing（余白）   | グリッドに沿った一貫した配置 |
| 近接 | Spacing階層       | 関連性を余白の大小で表現     |
| 対比 | Color・Typography | 視覚的階層の明確化           |
| 反復 | UIプリミティブ    | コンポーネントの統一         |

**原則**:

- トークンで定義された値のみ使用可能
- 任意の値（arbitrary values）は禁止
- バリアントは限定列挙で選択肢を制約

### トークンの継続的再構成

デザイントークンは不変ではなく、実装に応じて**継続的に再構成**する。個別のスタイル修正ではなく、トークン体系自体を見直し、一貫性のある変更を行う。

**再構成のトリガー**:

- 既存トークンでは表現できないUIパターンの出現
- 類似トークンの乱立（統合の必要性）
- arbitrary valuesの増加（トークン体系の不足）
- ブランド変更・デザインリニューアル

**再構成のプロセス**:

1. 課題の特定（どのトークンが不足/過剰/不適切か）
2. トークン体系の再設計（設定ファイルの修正）
3. 全体への一貫した適用（変更トークンを使用する全箇所を更新）
4. Linterによる検証（未定義トークンがないか確認）

**本質**: トークンは「最初に完璧に定義するもの」ではなく、「実装を通じて真に必要な体系が見えてくるもの」である。これは`../structural-discipline/module-cohesion-principles.md`の「3回ルール」と同じ思想である。

### 美的方向性の反映

4原則は「構造」を定義し、トークンは「表現」を具体化する。プロジェクトごとに明確な美的方向性（トーン）を選択し、トークン体系に一貫して反映する。

**原則**:

- 実装前にトーンを決定する（ミニマル、レトロ、ブルータリスト等）
- 選択したトーンをトークン（フォント、配色、余白）で一貫して表現する
- ジェネリックなAI生成デザイン（グラデーション多用、汎用フォント等）を避ける

## 解析可能性との関係

デザイン原則も`../co-evolution/analyzability-principles.md`の考え方を適用する。

| レベル                  | デザインでの適用                   |
| ----------------------- | ---------------------------------- |
| レベル3（型システム）   | デザイントークンで選択肢を限定     |
| レベル2（Linter）       | 未定義トークンの検出、構文チェック |
| レベル1（ドキュメント） | デザイン原則のドキュメント化       |

**目指す状態**: デザイントークンという「型」により、デザインの一貫性を機械的に保証する。

## まとめ

1. **整列**: 見えない基準線に沿って配置し、視覚的秩序を作る
2. **近接**: 関連性を物理的距離で表現し、グルーピングを明確化
3. **対比**: 重要度の差を視覚的差として明示し、階層を作る
4. **反復**: 同じ意味には同じスタイルを適用し、一貫性を保つ
5. **デザイントークン**: 4原則をコードレベルで強制し、継続的に再構成する

デザインは感覚ではなく、**原則に基づく構造的判断**である。
